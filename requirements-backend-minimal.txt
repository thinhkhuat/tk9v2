# TK9 Deep Research MCP - Backend Dependencies
# Minimal working set - verified outside Docker
#
# ⚠️ CRITICAL DEPENDENCY NOTES (2025-11-03):
#
# 1. langchain Version Constraint:
#    - MUST pin to 0.3.x series: langchain>=0.3.0,<1.0.0
#    - langchain 1.0+ REMOVED langchain.docstore module (breaking change)
#    - gpt-researcher imports: from langchain.docstore.document import Document
#    - Without constraint, UV resolver installs 1.0.3 → ModuleNotFoundError
#
# 2. Google AI SDK Dual Support:
#    - MUST have BOTH old and new SDKs (SDK transition period)
#    - google-genai==1.47.0 (new SDK for modern code)
#    - google-generativeai==0.8.4 (old SDK for legacy imports)
#    - Code imports: import google.generativeai (old SDK name)
#    - Without old SDK → ModuleNotFoundError
#
# 3. Strategic Pinning Approach:
#    - ❌ WRONG: Remove all constraints (resolver picks breaking versions)
#    - ❌ WRONG: Pin exact host versions (creates incompatibilities)
#    - ✅ CORRECT: Pin major version boundaries (e.g., >=0.3.0,<1.0.0)
#
# See: CLAUDE.md Phase 6 for full context
# See: docs/docker_deployment/DEPLOYMENT_GUIDE.md Issue #1 for troubleshooting

fastapi>=0.104.1
uvicorn[standard]>=0.24.0
websockets>=12.0
jinja2>=3.1.2
python-multipart>=0.0.6
aiofiles>=23.2.1
pydantic>=2.5.3
pydantic-settings>=2.1.0
pyjwt[crypto]>=2.10.1
supabase>=2.11.0
python-dotenv>=1.0.0

# Multi-Agent System
gpt-researcher>=0.14
langgraph
langgraph-cli

# Langchain ecosystem - pin to 0.3.x for backward compatibility with gpt-researcher
# langchain 1.0+ removed langchain.docstore module (breaking change)
langchain>=0.3.0,<1.0.0
langchain-community
langchain-openai
langchain-google-genai
langchain-text-splitters

weasyprint
json5
loguru

# LLM Providers - EXACT HOST VERSIONS
google-genai==1.47.0
google-generativeai==0.8.4
anthropic==0.72.0
